<!DOCTYPE html>
<html>
<head>
    <title>Juego de Ahorcado</title>
</head>
<body>
    <h1>Juego de Ahorcado</h1>
    <p>¡Bienvenido! Estoy pensando en una palabra secreta. Adivina la palabra letra por letra.</p>
    <div id="wordDisplay"></div>
    <p>Intentos restantes: <span id="remainingAttempts">6</span></p>
    <input type="text" id="guessInput">
    <button onclick="checkGuess()">Adivinar</button>
    <p id="hint"></p>
    <p id="hintsRemaining">Pistas restantes: 3</p>
    <button onclick="useHint()">Usar Pista</button>
    <button id="playAgainButton" style="display: none;" onclick="location.href='https://www.retoencodility.com'">Continue this way</button>

    <script>
        const words = ["javascript", "programacion", "desafio", "complicado", "tecnologia", "computadora"];
        let secretWord = words[Math.floor(Math.random() * words.length)];
        let displayedWord = "_".repeat(secretWord.length);
        let remainingAttempts = 6;
        let hintsRemaining = 3;

        function checkGuess() {
            const guess = document.getElementById("guessInput").value.toLowerCase();
            document.getElementById("guessInput").value = "";

            if (guess.length !== 1) {
                document.getElementById("hint").textContent = "Ingresa solo una letra a la vez.";
                return;
            }

            if (secretWord.includes(guess)) {
                for (let i = 0; i < secretWord.length; i++) {
                    if (secretWord[i] === guess) {
                        displayedWord = displayedWord.substr(0, i) + guess + displayedWord.substr(i + 1);
                    }
                }

                if (displayedWord === secretWord) {
                    document.getElementById("hint").textContent = `Congratulations!!, you unlocked the door that leads to the JS exercise!`;
                    document.getElementById("playAgainButton").style.display = "block";
                } else {
                    document.getElementById("hint").textContent = "¡Correcto! Sigue adivinando.";
                }
            } else {
                remainingAttempts--;
                document.getElementById("hint").textContent = "Incorrecto. Sigue intentándolo.";

                if (remainingAttempts === 0) {
                    document.getElementById("hint").textContent = `¡Perdiste! La palabra era "${secretWord}".`;
                }
            }

            document.getElementById("wordDisplay").textContent = displayedWord;
            document.getElementById("remainingAttempts").textContent = remainingAttempts;
        }

        function useHint() {
            if (hintsRemaining > 0) {
                const hiddenIndexes = [];
                for (let i = 0; i < secretWord.length; i++) {
                    if (displayedWord[i] === "_") {
                        hiddenIndexes.push(i);
                    }
                }
                if (hiddenIndexes.length > 0) {
                    const randomIndex = hiddenIndexes[Math.floor(Math.random() * hiddenIndexes.length)];
                    displayedWord = displayedWord.substr(0, randomIndex) + secretWord[randomIndex] + displayedWord.substr(randomIndex + 1);
                    hintsRemaining--;
                    document.getElementById("hintsRemaining").textContent = `Pistas restantes: ${hintsRemaining}`;
                    document.getElementById("wordDisplay").textContent = displayedWord;
                }
            }
        }
    </script>
</body>
</html>
